plugins {
    id 'java'
}

java {
    toolchain {
        languageVersion.set(JavaLanguageVersion.of(8))
    }
}

group = 'com.gradle'
description = 'Maven extension to configure injected Gradle Enterprise Maven extension'
version = '1.0.0'

repositories {
    mavenCentral()
}

configurations {
    mvnExtension {
        canBeConsumed = true
        canBeResolved = false
    }
}

dependencies {
    compileOnly 'org.apache.maven:maven-core:3.8.6'
    compileOnly "com.gradle:gradle-enterprise-maven-extension:${gradle.gradleEnterpriseMavenExtensionVersion}"
}

// See https://docs.gradle.org/current/userguide/working_with_files.html#sec:reproducible_archives
tasks.withType(AbstractArchiveTask).configureEach {
    preserveFileTimestamps = false
    reproducibleFileOrder = true
}

artifacts {
    mvnExtension(jar)
}
